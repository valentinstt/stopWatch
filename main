<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Elapsed Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #0056b3;
            margin-bottom: 20px;
        }

        #results p {
            font-size: 1.2em;
            margin: 10px 0;
        }

        #results span {
            font-weight: bold;
            color: #007bff;
        }

        .error {
            color: red;
            font-weight: bold;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Time Elapsed Since: <span id="targetDateDisplay"></span></h1>
        <div id="results">
            <p>Years: <span id="years"></span></p>
            <p>Months: <span id="months"></span></p>
            <p>Days: <span id="days"></span></p>
            <p>Hours: <span id="hours"></span></p>
            <p>Minutes: <span id="minutes"></span></p>
        </div>
        <p class="error" id="errorMessage"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const dateParam = urlParams.get('date');

            const targetDateDisplay = document.getElementById('targetDateDisplay');
            const yearsSpan = document.getElementById('years');
            const monthsSpan = document.getElementById('months');
            const daysSpan = document.getElementById('days');
            const hoursSpan = document.getElementById('hours');
            const minutesSpan = document.getElementById('minutes');
            const errorMessage = document.getElementById('errorMessage');

            if (!dateParam) {
                errorMessage.textContent = 'Error: No date parameter found in the URL. Please use the format YYYY-MM-DD-HH-MM (e.g., ?date=2023-01-15-10-30).';
                return;
            }

            const dateParts = dateParam.split('-');
            if (dateParts.length !== 5) {
                errorMessage.textContent = 'Error: Invalid date format. Please use YYYY-MM-DD-HH-MM.';
                return;
            }

            const year = parseInt(dateParts[0]);
            const month = parseInt(dateParts[1]) - 1; // Month is 0-indexed in JavaScript Date
            const day = parseInt(dateParts[2]);
            const hour = parseInt(dateParts[3]);
            const minute = parseInt(dateParts[4]);

            const targetDate = new Date(year, month, day, hour, minute);

            if (isNaN(targetDate.getTime())) {
                errorMessage.textContent = 'Error: Invalid date provided. Please ensure the date components are valid.';
                return;
            }

            targetDateDisplay.textContent = targetDate.toLocaleString();

            function updateElapsedTime() {
                const now = new Date();
                let fromDate = new Date(targetDate.getTime()); // Use a copy to avoid modifying original targetDate

                if (fromDate > now) {
                    errorMessage.textContent = 'The specified date is in the future. Please provide a past date.';
                    yearsSpan.textContent = 'N/A';
                    monthsSpan.textContent = 'N/A';
                    daysSpan.textContent = 'N/A';
                    hoursSpan.textContent = 'N/A';
                    minutesSpan.textContent = 'N/A';
                    return;
                }

                let years = 0;
                let months = 0;
                let days = 0;
                let hours = 0;
                let minutes = 0;

                // Calculate years
                while (fromDate.getFullYear() < now.getFullYear() ||
                       (fromDate.getFullYear() === now.getFullYear() && fromDate.getMonth() < now.getMonth()) ||
                       (fromDate.getFullYear() === now.getFullYear() && fromDate.getMonth() === now.getMonth() && fromDate.getDate() < now.getDate()) ||
                       (fromDate.getFullYear() === now.getFullYear() && fromDate.getMonth() === now.getMonth() && fromDate.getDate() === now.getDate() && fromDate.getHours() < now.getHours()) ||
                       (fromDate.getFullYear() === now.getFullYear() && fromDate.getMonth() === now.getMonth() && fromDate.getDate() === now.getDate() && fromDate.getHours() === now.getHours() && fromDate.getMinutes() <= now.getMinutes()))
                {
                    let nextYearDate = new Date(fromDate.getFullYear() + 1, fromDate.getMonth(), fromDate.getDate(), fromDate.getHours(), fromDate.getMinutes());
                    if (nextYearDate <= now) {
                        years++;
                        fromDate = nextYearDate;
                    } else {
                        break;
                    }
                }


                // Calculate months
                while (fromDate.getMonth() < now.getMonth() ||
                       (fromDate.getMonth() === now.getMonth() && fromDate.getDate() < now.getDate()) ||
                       (fromDate.getMonth() === now.getMonth() && fromDate.getDate() === now.getDate() && fromDate.getHours() < now.getHours()) ||
                       (fromDate.getMonth() === now.getMonth() && fromDate.getDate() === now.getDate() && fromDate.getHours() === now.getHours() && fromDate.getMinutes() <= now.getMinutes()))
                {
                    let nextMonthDate = new Date(fromDate.getFullYear(), fromDate.getMonth() + 1, fromDate.getDate(), fromDate.getHours(), fromDate.getMinutes());
                    if (nextMonthDate <= now) {
                        months++;
                        fromDate = nextMonthDate;
                    } else {
                        break;
                    }
                }


                // Calculate days
                while (fromDate.getDate() < now.getDate() ||
                       (fromDate.getDate() === now.getDate() && fromDate.getHours() < now.getHours()) ||
                       (fromDate.getDate() === now.getDate() && fromDate.getHours() === now.getHours() && fromDate.getMinutes() <= now.getMinutes()))
                {
                    let nextDayDate = new Date(fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate() + 1, fromDate.getHours(), fromDate.getMinutes());
                     if (nextDayDate <= now) {
                        days++;
                        fromDate = nextDayDate;
                    } else {
                        break;
                    }
                }

                // Calculate hours
                while (fromDate.getHours() < now.getHours() ||
                       (fromDate.getHours() === now.getHours() && fromDate.getMinutes() <= now.getMinutes()))
                {
                    let nextHourDate = new Date(fromDate.getFullYear(), fromDate.getMonth(), fromDate.getDate(), fromDate.getHours() + 1, fromDate.getMinutes());
                    if (nextHourDate <= now) {
                        hours++;
                        fromDate = nextHourDate;
                    } else {
                        break;
                    }
                }

                // Calculate minutes
                minutes = now.getMinutes() - fromDate.getMinutes();
                if (minutes < 0) { // Should not happen with the current cascade logic, but good for robustness
                    minutes += 60;
                }


                yearsSpan.textContent = years;
                monthsSpan.textContent = months;
                daysSpan.textContent = days;
                hoursSpan.textContent = hours;
                minutesSpan.textContent = minutes;
            }

            updateElapsedTime();
            setInterval(updateElapsedTime, 60000); // Update every minute
        });
    </script>
</body>
</html>
